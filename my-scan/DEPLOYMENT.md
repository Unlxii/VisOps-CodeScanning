# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Deployment Guide) - CMU VisScan

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Production VM (`10.10.184.118`) ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö GitLab ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏î‡∏¥‡∏°

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Port ‡∏ä‡∏ô‡∏Å‡∏±‡∏ô
‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á VM ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô GitLab ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏û‡∏≠‡∏£‡πå‡∏ï 80/443 ‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ VisScan ‡πÉ‡∏ä‡πâ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡πâ‡∏≤‡∏¢ GitLab ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô (‡πÄ‡∏ä‡πà‡∏ô `8929`)

## 0. ‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á VM (Transfer Code)
‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡πÄ‡∏£‡∏≤‡∏°‡∏µ 2 ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡∏ö‡∏ô VM:

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ú‡πà‡∏≤‡∏ô Git (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì push ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô Git Repository (‡πÄ‡∏ä‡πà‡∏ô GitHub ‡∏´‡∏£‡∏∑‡∏≠ GitLab ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß) ‡πÅ‡∏•‡πâ‡∏ß:
1. SSH ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà VM:
   ```bash
   ssh <username>@10.10.184.118
   ```
2. Clone ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏•‡∏á‡∏°‡∏≤:
   ```bash
   git clone -b <branch-name> <your-repo-url> viscan-app
   cd viscan-app
   # ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤ clone ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô branch:
   # git checkout <branch-name>
   ```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏£‡∏á‡πÜ (SCP)
‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡πÑ‡∏õ‡∏ó‡∏µ‡πà VM ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô Git):
1. **‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac** ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà terminal (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå):
   ```bash
   # ‡∏™‡πà‡∏á‡∏ó‡∏±‡πâ‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà home directory ‡∏Ç‡∏≠‡∏á user ‡∏ö‡∏ô VM
   # ‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô node_modules ‡πÅ‡∏•‡∏∞ .git ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
   rsync -avz --exclude 'node_modules' --exclude '.git' --exclude '.next' ./ <username>@10.10.184.118:~/viscan-app
   ```

---

## 1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ GitLab ‡πÉ‡∏´‡∏°‡πà (‡∏¢‡πâ‡∏≤‡∏¢‡πÑ‡∏õ Port 8929)
‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏£‡∏±‡∏ô VisScan ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡πâ‡∏≤‡∏¢ GitLab ‡∏´‡∏ô‡∏µ‡∏à‡∏≤‡∏Å‡∏û‡∏≠‡∏£‡πå‡∏ï 80/443 ‡∏Å‡πà‡∏≠‡∏ô

1.  **SSH ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á VM** ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå Config:
    ```bash
    sudo nano /etc/gitlab/gitlab.rb
    ```

2.  **‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ** (‡∏Å‡∏î `Ctrl+W` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÄ‡∏•‡∏¢):
    ```ruby
    # 1. ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô External URL ‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏û‡∏≠‡∏£‡πå‡∏ï
    external_url 'http://10.10.184.118:8929' 

    # 2. ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö Nginx ‡∏Ç‡∏≠‡∏á GitLab ‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏≠‡∏£‡πå‡∏ï 8929
    # (‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)
    nginx['listen_port'] = 8929
    ```

3.  **‡∏™‡∏±‡πà‡∏á Reconfigure GitLab**:
    ```bash
    sudo gitlab-ctl reconfigure
    ```

4.  **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö**: ‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ `http://10.10.184.118:8929` ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°

---

## 2. ‡∏Å‡∏≤‡∏£ Deploy VisScan (‡∏ó‡∏µ‡πà Port 80/443)

### ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Environment
SSH ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `viscan-app` ‡∏ö‡∏ô VM ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env`:
```bash
cd ~/viscan-app
nano .env
```
‡∏ß‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
```env
NEXT_PUBLIC_BASE_URL=https://viscan.cpe.eng.cmu.ac.th

# Database
DATABASE_URL="postgresql://user:password@localhost:5432/scandb?schema=public"

# GitLab Config
GITLAB_PROJECT_ID=141
GITLAB_TOKEN="<glpat-token>" 
GITLAB_API_URL="http://10.10.184.118:8929/api/v4"
GITLAB_TRIGGER_TOKEN="<glptt-token>"
TEMPLATE_API_KEY="secret-key-for-internal-use"
ENCRYPTION_KEY="<32-chars-key>"

# CMU EntraID Auth (Standardized)

CMU_ENTRAID_REDIRECT_URL="https://viscan.cpe.eng.cmu.ac.th/cmuEntraIDCallback"
CMU_ENTRAID_AUTHORIZATION_URL="https://login.microsoftonline.com/cf81f1df-de59-4c29-91da-a2dfd04aa751/oauth2/v2.0/authorize"
CMU_ENTRAID_GET_TOKEN_URL="https://login.microsoftonline.com/cf81f1df-de59-4c29-91da-a2dfd04aa751/oauth2/v2.0/token"
CMU_ENTRAID_GET_BASIC_INFO="https://api.cmu.ac.th/mis/cmuaccount/prod/v3/me/basicinfo"
SCOPE="api://cmu/Mis.Account.Read.Me.Basicinfo offline_access"

# IMPORTANT: ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Domain ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (IP ‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ CMU ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï)
NEXTAUTH_URL="https://viscan.cpe.eng.cmu.ac.th"
NEXTAUTH_SECRET="<generate-random-secret>"

# RabbitMQ
RABBITMQ_URL="amqp://localhost:5672"
```

### ‡πÑ‡∏ü‡∏•‡πå Docker Compose (`docker-compose.prod.yml`)
‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `docker-compose.prod.yml` (‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°):
```yaml
version: '3.8'
services:
  web:
    build: .
    ports:
      - "80:3000"  # ‡∏¢‡∏¥‡∏á‡∏û‡∏≠‡∏£‡πå‡∏ï 80 ‡πÄ‡∏Ç‡πâ‡∏≤ 3000
    env_file: .env
    depends_on:
      - db
      - rabbitmq
    restart: always

  worker:
    build: 
      context: .
      dockerfile: Dockerfile.worker
    env_file: .env
    depends_on:
      - db
      - rabbitmq
    restart: always

  db:
    image: postgres:15-alpine
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: scandb
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  rabbitmq:
    image: rabbitmq:3-management
    ports:
      - "5672:5672"
      - "15672:15672"

volumes:
  postgres_data:
```

### ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö
```bash
docker-compose -f docker-compose.prod.yml up -d --build
```

### ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Firewall (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ UFW)
```bash
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 8929/tcp
sudo ufw allow 5432/tcp
sudo ufw allow 5672/tcp
sudo ufw allow 15672/tcp
```

## 3. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Verify)
- **GitLab**: `http://10.10.184.118:8929`

---

---

## 3. ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ "Job Stuck" (Troubleshooting)

‡∏´‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ **Pipeline ‡∏Ñ‡πâ‡∏≤‡∏á (Stuck)**:

### 3.1 ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Runner ‡πÄ‡∏î‡∏¥‡∏°‡∏Å‡πà‡∏≠‡∏ô (Check Existing Runner)
‡∏•‡∏≠‡∏á SSH ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà VM ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ container ‡∏Ç‡∏≠‡∏á runner ‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°:

```bash
# 1. ‡∏î‡∏π Container ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà
docker ps | grep gitlab-runner

# 2. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡∏î‡∏π Container ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß)
docker ps -a | grep gitlab-runner

# 3. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡πÅ‡∏ï‡πà State ‡πÄ‡∏õ‡πá‡∏ô Exited ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á Start ‡πÉ‡∏´‡∏°‡πà
docker start gitlab-runner
```

‡∏ñ‡πâ‡∏≤ **‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ Runner ‡πÄ‡∏•‡∏¢** ‡∏´‡∏£‡∏∑‡∏≠ **Start ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ú‡∏•** ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (3.2)

---

### 3.2 ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Runner ‡πÉ‡∏´‡∏°‡πà (Setup New Runner)
‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ Runner ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:

1.  **‡πÑ‡∏õ‡∏ó‡∏µ‡πà GitLab Web Interface**:
    - Project -> Settings -> CI/CD -> Runners
    - ‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ **Registration Token** ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ

2.  **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏ü‡∏•‡πå‡∏ö‡∏ô VM (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!)**:
    - ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå `docker-compose.runner.yml` ‡πÅ‡∏•‡∏∞ `scripts/register-runner.sh` ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    - ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà VM ‡∏Å‡πà‡∏≠‡∏ô:
    ```bash
    # ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Mac ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô <username> ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ user ‡∏ö‡∏ô VM)
    rsync -avz ./docker-compose.runner.yml ./scripts <username>@10.10.184.118:~/viscan-app/
    ```

3.  **‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô Runner (‡∏ö‡∏ô VM)**:
    - SSH ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà VM: `ssh <username>@10.10.184.118`
    - ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå: `cd ~/viscan-app`
    ```bash
    # ‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå execute ‡πÑ‡∏ü‡∏•‡πå
    chmod +x scripts/register-runner.sh
    
    # ‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå
    ./scripts/register-runner.sh
    ```
    - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏≤‡∏° **GitLab URL**: ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ default (`http://10.10.184.118:8929`) ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î Enter
    - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏≤‡∏° **Token**: ‡πÉ‡∏´‡πâ‡∏ß‡∏≤‡∏á Token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠ 1

4.  **‡∏£‡∏±‡∏ô Service Runner**:
    ```bash
    docker-compose -f docker-compose.runner.yml up -d
    ```

5.  **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞**:
    - ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Settings -> CI/CD -> Runners ‡πÉ‡∏ô GitLab
    - ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (üü¢ Online)
    - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Pipeline ‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà ‡∏Å‡∏î **Cancel** ‡πÅ‡∏•‡πâ‡∏ß **Run Pipeline** ‡πÉ‡∏´‡∏°‡πà
